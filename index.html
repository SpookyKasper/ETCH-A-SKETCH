<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Etch-a-sketch</title>
    <link rel="stylesheet" href="eas.css">
    <script src="eas.js"></script>
</head>
<body>
    
    <script>
        const inputButton = document.createElement('button');
        document.body.appendChild(inputButton);

        const container = document.createElement('div');
        container.setAttribute('id', 'mainContainer')
        document.body.appendChild(container);
        
        let baseNum = 16;
        const mainCont = document.querySelector('#mainContainer');
        mainCont.style.gridTemplateColumns = `repeat(${baseNum}, 1fr`;
        mainCont.style.gridTemplateRows = `repeat(${baseNum}, 1fr`;
        
        function createEls(el, num){
            for(i = 1; i <= num; i++){
                someDiv = document.createElement(el);
                someDiv.setAttribute('class', 'boxes');
                someDiv.setAttribute('id', 'box' + i);
                mainCont.appendChild(someDiv);
            }
        }

        function colorDiv(event) {
            this.classList.add('hovered');
        }

        createEls('div', baseNum ** 2);
        const divBoxes = document.querySelectorAll('.boxes');
        divBoxes.forEach(div => div.addEventListener('mouseover', colorDiv));

        const button = document.querySelector('button');

        button.addEventListener('click', (e) => {
            let keepGoing = true;
            while(keepGoing){
                numberCR = prompt();
                if (numberCR === null){
                    numberCR = baseNum;
                    keepGoing = false;
                    return;
                } else if (isNaN(numberCR) || numberCR > 100 || numberCR < 1){
                    alert('please input a number between 1 and 100');
                    continue;
                } else { 
                    keepGoing = false;                                
                }
            }
            let oldBoxes = document.querySelectorAll('.boxes');
            oldBoxes.forEach(div => mainCont.removeChild(div));
            
            mainCont.style.gridTemplateColumns = `repeat(${numberCR}, 1fr)`;
            mainCont.style.gridTemplateRows = `repeat(${numberCR}, 1fr)`;
            createEls('div', numberCR ** 2);
            let newBoxes = document.querySelectorAll('.boxes');
            newBoxes.forEach(box => box.addEventListener('mouseover', colorDiv));
        });                                
        
    </script>
</body>
</html>